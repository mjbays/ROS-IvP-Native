OPTION(IVP_BUILD_@LIBNAME@ "Build library @LIBNAME@" @IVP_BUILD_BY_DEFAULT@)

IF("${IVP_BUILD_@LIBNAME@}" STREQUAL "ON")
   FILE(GLOB SRC *.cpp *.c)
   ADD_LIBRARY(@LIBNAME@ ${SRC})

   IF("${IVP_PACKAGE_VERSION}" STREQUAL "")
      MESSAGE(STATUS "@LIBNAME@: IVP_PACKAGE_VERSION not set, so not creating install component.")
   ELSE("${IVP_PACKAGE_VERSION}" STREQUAL "")
      INSTALL(
         TARGETS @LIBNAME@
         DESTINATION lib/ivp-${IVP_PACKAGE_VERSION}
         COMPONENT @IVP_INSTALL_COMPONENT@)

      FILE(GLOB IVP_PUBLIC_HEADERS *.h)

      INSTALL(
         FILES ${IVP_PUBLIC_HEADERS}
         DESTINATION include/ivp-${IVP_PACKAGE_VERSION}/@IVP_SUBDIR_NAME@
         COMPONENT @IVP_INSTALL_COMPONENT@
         )

   ENDIF("${IVP_PACKAGE_VERSION}" STREQUAL "")

ENDIF("${IVP_BUILD_@LIBNAME@}" STREQUAL "ON")